{"version":3,"file":"index.js","sources":["src/join.js","src/sort.js","src/serialize.js","src/index.js"],"sourcesContent":["import homunculus from 'homunculus';\n\nlet Token = homunculus.getClass('token', 'jsx');\n\nlet S = {};\nS[Token.LINE] = S[Token.COMMENT] = S[Token.BLANK] = true;\n\nlet index;\nlet res;\n\nfunction recursion(node, excludeLine) {\n  if(node.isToken()) {\n    let token = node.token();\n    if(!token.isVirtual()) {\n      res += token.content();\n      while(token.next()) {\n        token = token.next();\n        if(token.isVirtual() || !S.hasOwnProperty(token.type())) {\n          break;\n        }\n        let s = token.content();\n        if(!excludeLine || s !== '\\n') {\n          res += token.content();\n        }\n      }\n    }\n  }\n  else {\n    node.leaves().forEach(function(leaf) {\n      recursion(leaf, excludeLine);\n    });\n  }\n}\n\nexport default function(node, excludeLine) {\n  res = '';\n  recursion(node, excludeLine);\n  return res;\n}\n","function quickSort(arr, begin, end, compare) {\n  if(begin >= end) {\n    return;\n  }\n  let i = begin, j = end, p = i, n = arr[p], seq = true;\n  outer:\n  while(i < j) {\n    if(seq) {\n      for(; i < j; j--) {\n        if((compare && compare.call(arr, n, arr[j])) || (!compare && n > arr[j])) {\n          swap(arr, p, j);\n          p = j;\n          seq = !seq;\n          continue outer;\n        }\n      }\n    }\n    else {\n      for(; i < j; i++) {\n        if((compare && compare.call(arr, arr[i], n)) || (!compare && n < arr[i])) {\n          swap(arr, p, i);\n          p = i;\n          seq = !seq;\n          continue outer;\n        }\n      }\n    }\n  }\n  quickSort(arr, begin, p, compare);\n  quickSort(arr, p + 1, end, compare);\n}\nfunction swap(arr, a, b) {\n  let temp = arr[a];\n  arr[a] = arr[b];\n  arr[b] = temp;\n}\n\nexport default function(arr, compare) {\n  if(!Array.isArray(arr)) {\n    throw new Error('quick sort need an array');\n  }\n  if(arr.length < 2) {\n    return arr;\n  }\n  quickSort(arr, 0, arr.length - 1, compare);\n  return arr;\n};\n","import homunculus from 'homunculus';\nimport join from './join';\nimport sort from './sort';\n\nlet Token = homunculus.getClass('token', 'css');\nlet Node = homunculus.getClass('node', 'css');\n\nlet idx;\n\nfunction parse(node, option) {\n  idx = 0;\n  let res = {};\n  node.leaves().forEach(function(leaf, i) {\n    if(leaf.name() === Node.STYLESET) {\n      styleset(leaf, res, option);\n    }\n    else if(leaf.name() === Node.MEDIA) {\n      res.media = res.media || [];\n      let item = {};\n\n      let qlist = leaf.leaf(1);\n      qlist.leaves().forEach(function(leaf) {\n        if(leaf.name() === Node.MEDIAQUERY) {\n          query(leaf, item);\n        }\n      });\n\n      let block = leaf.last();\n      let leaves = block.leaves();\n      if(leaves.length > 2) {\n        let style = {};\n        for(let i = 1, len = leaves.length - 1; i < len; i++) {\n          styleset(leaves[i], style, option);\n        }\n        item.style = style;\n      }\n      if(item.style) {\n        res.media.push(item);\n      }\n    }\n  });\n  return res;\n}\n\nfunction query(node, item) {\n  let leaves = node.leaves();\n  let query = [];\n  leaves.forEach(function(leaf) {\n    if(leaf.name() === Node.EXPR) {\n      let expr = [];\n      leaf.leaves().forEach(function(item) {\n        if(item.name() === Node.KEY || item.name() === Node.VALUE) {\n          expr.push(join(item, true));\n        }\n      });\n      //可能只有key或者k/v都有，以String/Array格式区分\n      if(expr.length) {\n        query.push(expr.length > 1 ? expr : expr[0]);\n      }\n    }\n  });\n  item.query = item.query || [];\n  item.query.push(query);\n}\n\nfunction styleset(node, res, option) {\n  let sels = selectors(node.first());\n  let styles = block(node.last());\n  let i = idx++;\n  sels.forEach(function(sel) {\n    record(sel, i, styles, res, option);\n  });\n}\nfunction selectors(node) {\n  let res = [];\n  node.leaves().forEach(function(leaf) {\n    if(leaf.name() === Node.SELECTOR) {\n      res.push(selector(leaf));\n    }\n  });\n  return res;\n}\nfunction selector(node) {\n  return node.leaves().map(function(leaf) {\n    return leaf.token();\n  });\n}\nfunction block(node) {\n  let res = [];\n  node.leaves().forEach(function(leaf) {\n    if(leaf.name() === Node.STYLE) {\n      res.push(style(leaf));\n    }\n  });\n  return res;\n}\nfunction style(node) {\n  let s = join(node, true).trim();\n  s = s.replace(/;$/, '');\n  return s;\n}\n\nfunction record(sel, idx, styles, res, option) {\n  let _p = [0, 0, 0];\n  for(let i = sel.length - 1; i >= 0; i--) {\n    let temp = {\n      s: [],\n      a: [],\n      p: []\n    };\n    let t = sel[i];\n    let s = t.content();\n    priority(t, s, _p);\n    switch(t.type()) {\n      case Token.SELECTOR:\n        temp.s.push(s);\n        break;\n      case Token.PSEUDO:\n        let s2 = s.replace(/^:+/, '');\n        if(sel[i].content() === '(') {\n          s2 += '(';\n          for(let j = i + 1; j < sel.length; j++) {\n            if(sel[j].content() === ')') {\n              s2 += ')';\n              break;\n            }\n            s2 += sel[j].content();\n          }\n        }\n        temp.p.push(s2);\n        break;\n      case Token.SIGN:\n        switch(s) {\n          case ']':\n            let item = [];\n            i--;\n            t = t.prev();\n            while(t) {\n              s = t.content();\n              if(s === '[') {\n                break;\n              }\n              i--;\n              t = t.prev();\n              s = s.replace(/^(['\"])(.*)\\1$/, '$2');\n              item.unshift(s);\n            }\n            temp.a.push({\n              v: item,\n              s: item.join('')\n            });\n            break;\n          case '+':\n          case '>':\n          case '~':\n            s = '_' + s;\n            res[s] = res[s] || {};\n            res = res[s];\n            continue;\n          //忽略掉()，因为其出现在:nth-child(n)中\n          case ')':\n            i--;\n            t = t.prev();\n            while(t) {\n              s = t.content();\n              if(s === '(') {\n                break;\n              }\n              i--;\n              t = t.prev();\n            }\n            break;\n        }\n        break;\n    }\n    t = t.prev();\n    while(t && !isSplit(t)) {\n      s = t.content();\n      priority(t, s, _p);\n      switch(t.type()) {\n        case Token.SELECTOR:\n          temp.s.push(s);\n          break;\n        case Token.PSEUDO:\n          let s2 = s.replace(/^:+/, '');\n          if(sel[i].content() === '(') {\n            s2 += '(';\n            for(let j = i + 1; j < sel.length; j++) {\n              if(sel[j].content() === ')') {\n                s2 += ')';\n                break;\n              }\n              s2 += sel[j].content();\n            }\n          }\n          temp.p.push(s2);\n          break;\n        case Token.SIGN:\n          switch(s) {\n            case ']':\n              let item = [];\n              i--;\n              t = t.prev();\n              while(t) {\n                s = t.content();\n                if(s === '[') {\n                  break;\n                }\n                i--;\n                t = t.prev();\n                s = s.replace(/^(['\"])(.*)\\1$/, '$2');\n                item.unshift(s);\n              }\n              temp.a.push({\n                v: item,\n                s: item.join('')\n              });\n              break;\n            case '+':\n            case '>':\n            case '~':\n              s = '_' + s;\n              res[s] = res[s] || {};\n              res = res[s];\n              continue;\n            //忽略掉()，因为其出现在:nth-child(n)中\n            case ')':\n              i--;\n              t = t.prev();\n              while(t) {\n                s = t.content();\n                if(s === '(') {\n                  break;\n                }\n                i--;\n                t = t.prev();\n              }\n              break;\n          }\n          break;\n      }\n      t = t.prev();\n      i--;\n    }\n    res = save(temp, res);\n  }\n  if(option.noValue) {\n    res._v = true;\n  }\n  else {\n    res._v = res._v || [];\n    styles.forEach(function(style) {\n      res._v.push([idx, style]);\n    });\n  }\n  if(!option.noPriority) {\n    res._p = _p;\n  }\n}\n\nfunction priority(token, s, p) {\n  switch(token.type()) {\n    case Token.SELECTOR:\n      if(s.charAt(0) === '#') {\n        p[0]++;\n      }\n      else if(s.charAt(0) === '.') {\n        p[1]++;\n      }\n      else {\n        p[2]++;\n      }\n      break;\n    case Token.PSEUDO:\n      p[2]++;\n      break;\n    case Token.SIGN:\n      if(s === ']') {\n        p[1]++;\n      }\n      break;\n  }\n}\n\nfunction isSplit(token) {\n  if(token.type() === Token.BLANK) {\n    return true;\n  }\n  if(token.type() === Token.LINE) {\n    return true;\n  }\n  if(token.type() === Token.SIGN) {\n    return ['>', '+', '~', '{', '}', ','].indexOf(token.content()) > -1;\n  }\n  return false;\n}\n\nfunction save(temp, res) {\n  if(!temp.s.length) {\n    temp.s.push('*');\n  }\n  //selector按name/class/id排序\n  sort(temp.s, function(a, b) {\n    return a !== '*' && a < b || b === '*';\n  });\n  let star = temp.s[0] === '*';\n  //*开头有几种组合，记录之\n  if(star) {\n    res['_*'] = true;\n    if(temp.s.length > 1) {\n      if(temp.s.length > 2) {\n        res['_*.#'] = true;\n      }\n      else if(temp.s[1][0] === '.') {\n        res['_*.'] = true;\n      }\n      else {\n        res['_*#'] = true;\n      }\n    }\n  }\n  let s = temp.s.join('');\n  res[s] = res[s] || {};\n  res = res[s];\n  //伪类\n  if(temp.p.length) {\n    res['_:'] = res['_:'] || [];\n    let pseudos = res['_:'];\n    let pseudo = [];\n    temp.p.forEach(function(item) {\n      //防止多次重复\n      if(pseudo.indexOf(item) === -1) {\n        pseudo.push(item);\n      }\n    });\n    //排序后比对，可能重复，合并之如a:hover{...}a:hover{...}会生成2个hover数组\n    sort(pseudo, function(a, b) {\n      return a < b;\n    });\n    let isExist = -1;\n    for(let j = 0, len = pseudos.length; j < len; j++) {\n      if(pseudos[j][0].join(',') === pseudo.join(',')) {\n        isExist = j;\n        break;\n      }\n    }\n    if(isExist > -1) {\n      res = pseudos[isExist][1];\n    }\n    else {\n      let arr = [];\n      arr.push(pseudo);\n      res = {};\n      arr.push(res);\n      pseudos.push(arr);\n    }\n  }\n  //属性\n  if(temp.a.length) {\n    res['_['] = res['_['] || [];\n    let attrs = res['_['];\n    let attr = [];\n    //去重并排序\n    sort(temp.a, function(a, b) {\n      return a.s < b.s;\n    });\n    let hash = {};\n    temp.a.forEach(function(item) {\n      if(!hash.hasOwnProperty(item.s)) {\n        attr.push(item.v);\n      }\n    });\n    let isExist = -1;\n    let join = '';\n    join += attr.map(function(item) {\n      return item.join('');\n    });\n    for(let j = 0, len = attrs.length; j < len; j++) {\n      let s1 = '';\n      s1 += attrs[j][0].map(function(item) {\n        return item.join('');\n      });\n      if(s1 === join) {\n        isExist = j;\n        break;\n      }\n    }\n    if(isExist > -1) {\n      res = attrs[isExist][1];\n    }\n    else {\n      let arr = [];\n      arr.push(attr);\n      res = {};\n      arr.push(res);\n      attrs.push(arr);\n    }\n  }\n  return res;\n}\n\nexport default parse;\n","import homunculus from 'homunculus';\nimport serialize from './serialize';\n\nclass Selenite {\n  constructor() {\n    this.parser = null;\n    this.node = null;\n  }\n\n  parse(code, option = {}) {\n    this.parser = homunculus.getParser('css');\n    this.node = this.parser.parse(code);\n    return serialize(this.node, option);\n  }\n\n  tokens() {\n    return this.ast ? this.parser.lexer.tokens() : null;\n  }\n  ast() {\n    return this.node;\n  }\n}\n\nexport default new Selenite();\n"],"names":["Token","homunculus","getClass","S","LINE","COMMENT","BLANK","res","recursion","node","excludeLine","isToken","token","isVirtual","content","next","hasOwnProperty","type","s","leaves","forEach","leaf","quickSort","arr","begin","end","compare","i","j","p","n","seq","outer","call","swap","a","b","temp","Array","isArray","Error","length","Node","idx","parse","option","name","STYLESET","styleset","MEDIA","media","item","qlist","MEDIAQUERY","query","block","last","style","len","push","EXPR","expr","KEY","VALUE","join","sels","selectors","first","styles","sel","record","SELECTOR","selector","map","STYLE","trim","replace","_p","t","priority","PSEUDO","s2","SIGN","prev","unshift","v","isSplit","save","noValue","_v","noPriority","charAt","indexOf","sort","star","pseudos","pseudo","isExist","attrs","attr","hash","s1","Selenite","parser","code","getParser","serialize","ast","lexer","tokens"],"mappings":"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"}